dnl Process this file with autoconf to produce a configure script.

AC_INIT(audiere.h)

MAJOR_VERSION=1
MINOR_VERSION=0
PATCH_VERSION=3
VERSION=$MAJOR_VERSION.$MINOR_VERSION.$PATCH_VERSION
PACKAGE="audiere"

AC_SUBST(MAJOR_VERSION)
AC_SUBST(MINOR_VERSION)
AC_SUBST(PATCH_VERSION)
AC_SUBST(VERSION)
AC_SUBST(PACKAGE)

AM_INIT_AUTOMAKE($PACKAGE, $VERSION)

dnl Checks for programs.

AC_PROG_CC
AC_PROG_CPP
AC_PROG_CXX
AC_PROG_CXXCPP
AC_PROG_MAKE_SET
AC_PROG_LIBTOOL

dnl Checks for libraries.

AC_CHECK_LIB(acoustique, AcqGetVersion,,AC_MSG_RESULT(no)
    AC_MSG_ERROR(Install Acoustique first))
AC_CHECK_LIB(pthread, pthread_create,,AC_MSG_RESULT(no)
    AC_MSG_ERROR(could not find pthread library))
AC_CHECK_LIB(openal, alBufferData,
    LIBS="$LIBS -lopenal"
    AC_DEFINE(WITH_OPENAL)
    AL_SOURCES="output_al.cpp output_al.hpp"
,
    AL_SOURCES=""
)

AC_SUBST(AL_SOURCES)

dnl Checks for header files.

AC_HEADER_STDC
AC_CHECK_HEADER(unistd.h)
AC_CHECK_HEADER(sys/soundcard.h,,AC_MSG_RESULT(no)
    AC_MSG_ERROR(could not find OSS header sys/soundcard.h))

dnl Checks for typedefs, structures, and compiler characteristics.

AC_C_BIGENDIAN

dnl Output makefiles.

AC_OUTPUT(Makefile)
