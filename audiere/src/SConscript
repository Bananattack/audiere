import os

Import('base_env PREFIX')

mpegsoundSources = map(
    lambda n: os.path.join('mpegsound', n),
    SConscript('mpegsound/SConscript'))

sources = Split("""
    debug.cpp
    device.cpp
    device_al.cpp
    device_mixer.cpp
    device_null.cpp
    file_ansi.cpp
    input.cpp
    input_flac.cpp
    input_mp3.cpp
    input_ogg.cpp
    input_wav.cpp
    memory_file.cpp
    noise.cpp
    repeatable.cpp
    resampler.cpp
    sample_buffer.cpp
    sound_effect.cpp
    square_wave.cpp
    sound.cpp
    threads_posix.cpp
    timer_posix.cpp
    tone.cpp
    utility.cpp
    version.cpp
""") + mpegsoundSources

env = base_env.Copy()
env.Append(CPPPATH = ['mpegsound'])

target = env.Library('audiere', sources)

env.Install(os.path.join(PREFIX, 'include'), 'audiere.h')
env.Install(os.path.join(PREFIX, 'lib32'), target)
