<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>output_ds.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>output_ds.hpp</h1><a href="output__ds_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#ifndef OUTPUT_DS_HPP</font>
<a name="l00002"></a><a class="code" href="output__ds_8hpp.html#a0">00002</a> <font class="preprocessor"></font><font class="preprocessor">#define OUTPUT_DS_HPP</font>
00003 <font class="preprocessor"></font>
00004 
00005 <font class="comment">// disable 'identifier too long' warning</font>
00006 <font class="preprocessor">#ifdef _MSC_VER</font>
00007 <font class="preprocessor"></font><font class="preprocessor">#pragma warning(disable : 4786)</font>
00008 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00009 <font class="preprocessor"></font>
00010 
00011 <font class="preprocessor">#include &lt;windows.h&gt;</font>
00012 <font class="preprocessor">#include &lt;mmreg.h&gt;</font>
00013 <font class="preprocessor">#include &lt;dsound.h&gt;</font>
00014 <font class="preprocessor">#include &lt;list&gt;</font>
00015 <font class="preprocessor">#include "<a class="code" href="output_8hpp.html">output.hpp</a>"</font>
00016 
00017 
00018 <font class="keyword">class </font><a class="code" href="classDSOutputStream.html">DSOutputStream</a>;
00019 
00020 
<a name="l00021"></a><a class="code" href="classDSOutputContext.html">00021</a> <font class="keyword">class </font><a class="code" href="classDSOutputContext.html">DSOutputContext</a> : <font class="keyword">public</font> <a class="code" href="classIOutputContext.html">IOutputContext</a>
00022 {
00023 <font class="keyword">public</font>:
00024   <a class="code" href="classDSOutputContext.html#a0">DSOutputContext</a>();
00025   <a class="code" href="classDSOutputContext.html#a1">~DSOutputContext</a>();
00026 
00027   <font class="keywordtype">bool</font> <a class="code" href="classDSOutputContext.html#a2">Initialize</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* parameters);
00028   <font class="keywordtype">void</font> <a class="code" href="classIOutputContext.html#a1">Update</a>();
00029   <a class="code" href="classIOutputStream.html">IOutputStream</a>* <a class="code" href="classIOutputContext.html#a2">OpenStream</a>(<a class="code" href="classISampleSource.html">ISampleSource</a>* source);
00030 
00031 <font class="keyword">private</font>:
00032   <font class="keyword">typedef</font> std::list&lt;DSOutputStream*&gt; StreamList;
00033 
00034   <font class="keywordtype">void</font> RemoveStream(<a class="code" href="classDSOutputStream.html">DSOutputStream</a>* stream);
00035 
00036   IDirectSound* m_DirectSound;
00037   StreamList    m_OpenStreams;
00038 
00039   <font class="keywordtype">int</font> m_BufferLength;  <font class="comment">// in milliseconds</font>
00040 
00041   HWND m_AnonymousWindow;
00042 
00043 
00044   <font class="comment">// these must be overridden</font>
00045   <font class="keyword">virtual</font> REFCLSID GetCLSID() = 0;
00046   <font class="keyword">virtual</font> DWORD GetCooperativeLevel() = 0;
00047   <font class="keyword">virtual</font> <font class="keywordtype">bool</font> CreatePrimarySoundBuffer(IDirectSound* ds) = 0;
00048 
<a name="l00049"></a><a class="code" href="classDSOutputContext.html#l0">00049</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="classDSOutputStream.html">DSOutputStream</a>;
00050 };
00051 
00052 
<a name="l00053"></a><a class="code" href="classDSOutputStream.html">00053</a> <font class="keyword">class </font><a class="code" href="classDSOutputStream.html">DSOutputStream</a> : <font class="keyword">public</font> <a class="code" href="classIOutputStream.html">IOutputStream</a>
00054 {
00055 <font class="keyword">private</font>:
00056   DSOutputStream(
00057     <a class="code" href="classDSOutputContext.html">DSOutputContext</a>* context,
00058     IDirectSoundBuffer* buffer,
00059     <font class="keywordtype">int</font> sample_size,   <font class="comment">// in bytes</font>
00060     <font class="keywordtype">int</font> buffer_length, <font class="comment">// in samples</font>
00061     <a class="code" href="classISampleSource.html">ISampleSource</a>* source);
00062   ~DSOutputStream();
00063 
00064 <font class="keyword">public</font>:
00065   <font class="keywordtype">void</font> <a class="code" href="classIOutputStream.html#a1">Play</a>();
00066   <font class="keywordtype">void</font> <a class="code" href="classIOutputStream.html#a2">Stop</a>();
00067   <font class="keywordtype">void</font> <a class="code" href="classIOutputStream.html#a3">Reset</a>();
00068   <font class="keywordtype">bool</font> <a class="code" href="classIOutputStream.html#a4">IsPlaying</a>();
00069   <font class="keywordtype">void</font> <a class="code" href="classIOutputStream.html#a5">SetVolume</a>(<font class="keywordtype">int</font> volume);
00070   <font class="keywordtype">int</font>  <a class="code" href="classIOutputStream.html#a6">GetVolume</a>();
00071 
00072   <font class="keywordtype">void</font> <a class="code" href="classDSOutputStream.html#a6">FillStream</a>();
00073   <font class="keywordtype">void</font> <a class="code" href="classIOutputContext.html#a1">Update</a>();
00074   <font class="keywordtype">int</font> <a class="code" href="classDSOutputStream.html#a8">StreamRead</a>(<font class="keywordtype">int</font> samples_to_read, <font class="keywordtype">void</font>* buffer);
00075   
00076   <font class="comment">// returns true if |position| is between |start| (inclusive) and</font>
00077   <font class="comment">// |end| (exclusive) in the buffer</font>
00078   <font class="keywordtype">bool</font> <a class="code" href="classDSOutputStream.html#a9">IsBetween</a>(<font class="keywordtype">int</font> position, <font class="keywordtype">int</font> start, <font class="keywordtype">int</font> end);
00079 
00080 <font class="keyword">private</font>:
00081   <a class="code" href="classDSOutputContext.html">DSOutputContext</a>* m_Context;
00082 
00083   IDirectSoundBuffer* m_Buffer;
00084   <font class="keywordtype">int</font> m_BufferLength;  <font class="comment">// in samples</font>
00085   <font class="keywordtype">int</font> m_NextRead;  <font class="comment">// offset (in samples) where we will read next</font>
00086 
00087   <a class="code" href="classISampleSource.html">ISampleSource</a>* m_Source;
00088   <font class="keywordtype">int</font> m_SampleSize;  <font class="comment">// convenience: bits per sample * channel count / 8</font>
00089 
00090   <font class="keywordtype">int</font> m_Volume;
00091   BYTE* m_LastSample; <font class="comment">// the last sample read (used for clickless silence)</font>
00092 
<a name="l00093"></a><a class="code" href="classDSOutputStream.html#l0">00093</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="classDSOutputContext.html">DSOutputContext</a>;
00094 };
00095 
00096 
00097 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Mon Jun 10 02:55:12 2002 for audiere by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
