<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>stream.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>stream.cpp</h1><a href="stream_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#include "<a class="code" href="stream_8hpp.html">stream.hpp</a>"</font>
00002 <font class="preprocessor">#include "<a class="code" href="context_8hpp.html">context.hpp</a>"</font>
00003 <font class="preprocessor">#include "<a class="code" href="utility_8hpp.html">utility.hpp</a>"</font>
00004 
00005 
00007 
00008 Stream::Stream()<font class="keyword"></font>
00009 <font class="keyword"></font>{
00010   m_context       = 0;
00011   m_input_stream  = 0;
00012   m_output_stream = 0;
00013 }
00014 
00016 
00017 <font class="keywordtype">bool</font>
00018 Stream::Initialize(<a class="code" href="classContext.html">Context</a>* context, <font class="keyword">const</font> <font class="keywordtype">char</font>* filename)<font class="keyword"></font>
00019 <font class="keyword"></font>{
00020   <a class="code" href="classISampleSource.html">ISampleSource</a>* sample_source = <a class="code" href="input_8hpp.html#a1">OpenInputStream</a>(
00021     context-&gt;m_file_system,
00022     filename);
00023   <font class="keywordflow">if</font> (!sample_source) {
00024     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00025   }
00026 
00027   m_input_stream = <font class="keyword">new</font> RepeatableStream(sample_source, <font class="keyword">false</font>);
00028 
00029   <font class="comment">// open output stream</font>
00030   m_output_stream = context-&gt;m_output_context-&gt;OpenStream(m_input_stream);
00031   <font class="keywordflow">if</font> (!m_output_stream) {
00032     <font class="keyword">delete</font> m_input_stream;
00033     m_input_stream = 0;
00034     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00035   }
00036 
00037   m_context = context;
00038   m_context-&gt;AddRef();
00039 
00040   <font class="keywordflow">return</font> <font class="keyword">true</font>;
00041 }
00042 
00044 
00045 <font class="keywordtype">void</font>
00046 Stream::Destructor()<font class="keyword"></font>
00047 <font class="keyword"></font>{
00048   <font class="keyword">delete</font> m_output_stream;
00049   m_output_stream = 0;
00050 
00051   <font class="keyword">delete</font> m_input_stream;
00052   m_input_stream = 0;
00053 
00054   <font class="keywordflow">if</font> (m_context) {
00055     m_context-&gt;Release();
00056     m_context = 0;
00057   }
00058 }
00059 
00061 
<a name="l00062"></a><a class="code" href="classStream.html#a0">00062</a> <a class="code" href="classStream.html#a0">Stream::~Stream</a>()<font class="keyword"></font>
00063 <font class="keyword"></font>{
00064   <font class="keywordflow">if</font> (m_context) {
00065     <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00066     Destructor();
00067   } <font class="keywordflow">else</font> {
00068     Destructor();
00069   }
00070 }
00071 
00073 
00074 <font class="keywordtype">void</font>
<a name="l00075"></a><a class="code" href="classStream.html#a1">00075</a> <a class="code" href="classStream.html#a1">Stream::Play</a>()<font class="keyword"></font>
00076 <font class="keyword"></font>{
00077   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00078   m_output_stream-&gt;<a class="code" href="classIOutputStream.html#a1">Play</a>();
00079 }
00080 
00082 
00083 <font class="keywordtype">void</font>
<a name="l00084"></a><a class="code" href="classStream.html#a2">00084</a> <a class="code" href="classStream.html#a2">Stream::Pause</a>()<font class="keyword"></font>
00085 <font class="keyword"></font>{
00086   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00087   m_output_stream-&gt;<a class="code" href="classIOutputStream.html#a2">Stop</a>();
00088 }
00089 
00091 
00092 <font class="keywordtype">void</font>
<a name="l00093"></a><a class="code" href="classStream.html#a3">00093</a> <a class="code" href="classStream.html#a3">Stream::Reset</a>()<font class="keyword"></font>
00094 <font class="keyword"></font>{
00095   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00096   m_input_stream-&gt;<a class="code" href="classRepeatableStream.html#a6">Reset</a>();
00097   m_output_stream-&gt;<a class="code" href="classIOutputStream.html#a3">Reset</a>();
00098 }
00099 
00101 
00102 <font class="keywordtype">bool</font>
<a name="l00103"></a><a class="code" href="classStream.html#a4">00103</a> <a class="code" href="classStream.html#a4">Stream::IsPlaying</a>()<font class="keyword"></font>
00104 <font class="keyword"></font>{
00105   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00106   <font class="keywordflow">return</font> m_output_stream-&gt;<a class="code" href="classIOutputStream.html#a4">IsPlaying</a>();
00107 }
00108 
00110 
00111 <font class="keywordtype">void</font>
<a name="l00112"></a><a class="code" href="classStream.html#a5">00112</a> <a class="code" href="classStream.html#a5">Stream::SetRepeat</a>(<font class="keywordtype">bool</font> repeat)<font class="keyword"></font>
00113 <font class="keyword"></font>{
00114   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00115   m_input_stream-&gt;<a class="code" href="classRepeatableStream.html#a2">SetRepeat</a>(repeat);
00116 }
00117 
00119 
00120 <font class="keywordtype">bool</font>
<a name="l00121"></a><a class="code" href="classStream.html#a6">00121</a> <a class="code" href="classStream.html#a6">Stream::IsRepeating</a>()<font class="keyword"></font>
00122 <font class="keyword"></font>{
00123   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00124   <font class="keywordflow">return</font> m_input_stream-&gt;<a class="code" href="classRepeatableStream.html#a3">GetRepeat</a>();
00125 }
00126 
00128 
00129 <font class="keywordtype">void</font>
<a name="l00130"></a><a class="code" href="classStream.html#a7">00130</a> <a class="code" href="classStream.html#a7">Stream::SetVolume</a>(<font class="keywordtype">int</font> volume)<font class="keyword"></font>
00131 <font class="keyword"></font>{
00132   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00133   m_output_stream-&gt;<a class="code" href="classIOutputStream.html#a5">SetVolume</a>(volume);
00134 }
00135 
00137 
00138 <font class="keywordtype">int</font>
<a name="l00139"></a><a class="code" href="classStream.html#a8">00139</a> <a class="code" href="classStream.html#a8">Stream::GetVolume</a>()<font class="keyword"></font>
00140 <font class="keyword"></font>{
00141   <a class="code" href="classAI__Lock.html">AI_Lock</a> l__(m_context);
00142   <font class="keywordflow">return</font> m_output_stream-&gt;<a class="code" href="classIOutputStream.html#a6">GetVolume</a>();
00143 }
00144 
</pre></div><hr><address><small>Generated at Mon Jun 10 02:55:12 2002 for audiere by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
