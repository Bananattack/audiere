<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>input_mod.hpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.8.1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>input_mod.hpp</h1><a href="input__mod_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="preprocessor">#ifndef INPUT_MOD_HPP</font>
<a name="l00002"></a><a class="code" href="input__mod_8hpp.html#a0">00002</a> <font class="preprocessor"></font><font class="preprocessor">#define INPUT_MOD_HPP</font>
00003 <font class="preprocessor"></font>
00004 
00005 <font class="preprocessor">#include &lt;mikmod.h&gt;</font>  <font class="comment">// </font>
00006 <font class="preprocessor">#include &lt;uniform.h&gt;</font> <font class="comment">// mikmod headers</font>
00007 <font class="preprocessor">#include &lt;mplayer.h&gt;</font> <font class="comment">//</font>
00008 <font class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</font>
00009 <font class="preprocessor">#include "<a class="code" href="input_8hpp.html">input.hpp</a>"</font>
00010 
00011 
00012 <font class="comment">// should match the C runtime's calling convention</font>
00013 
00014 <font class="preprocessor">#ifdef _WIN32</font>
00015 <font class="preprocessor"></font><font class="preprocessor">  #define CRT_CALL __cdecl</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#else</font>
<a name="l00017"></a><a class="code" href="input__mod_8hpp.html#a1">00017</a> <font class="preprocessor"></font><font class="preprocessor">  #define CRT_CALL</font>
00018 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
00019 <font class="preprocessor"></font>
00020 
<a name="l00021"></a><a class="code" href="classMODInputStream.html">00021</a> <font class="keyword">class </font><a class="code" href="classMODInputStream.html">MODInputStream</a> : <font class="keyword">public</font> <a class="code" href="classISampleSource.html">ISampleSource</a>
00022 {
00023 <font class="keyword">public</font>:
00024   <a class="code" href="classMODInputStream.html#a0">MODInputStream</a>();
00025   <a class="code" href="classMODInputStream.html#a1">~MODInputStream</a>();
00026 
00027   <font class="keywordtype">bool</font> <a class="code" href="classMODInputStream.html#a2">Initialize</a>(<a class="code" href="classIFile.html">IFile</a>* file);
00028 
00029   <font class="keywordtype">void</font> <a class="code" href="classISampleSource.html#a1">GetFormat</a>(
00030     <font class="keywordtype">int</font>&amp; channel_count,
00031     <font class="keywordtype">int</font>&amp; sample_rate,
00032     <font class="keywordtype">int</font>&amp; bits_per_sample);
00033   <font class="keywordtype">int</font> <a class="code" href="classISampleSource.html#a2">Read</a>(<font class="keywordtype">int</font> sample_count, <font class="keywordtype">void</font>* samples);
00034   <font class="keywordtype">bool</font> <a class="code" href="classISampleSource.html#a3">Reset</a>();
00035 
00036 <font class="keyword">private</font>:
00037   <font class="comment">// MMIO file callbacks</font>
00038   <font class="keyword">static</font> <font class="keywordtype">int</font> CRT_CALL MMRead(
00039     <font class="keywordtype">void</font>* buffer, size_t size, size_t count, FILE* stream);
00040   <font class="keyword">static</font> <font class="keywordtype">int</font> CRT_CALL MMWrite(
00041     <font class="keyword">const</font> <font class="keywordtype">void</font>* buffer, size_t size, size_t count, FILE* stream);
00042   <font class="keyword">static</font> <font class="keywordtype">int</font> CRT_CALL MMGetC(FILE* stream);
00043   <font class="keyword">static</font> <font class="keywordtype">int</font> CRT_CALL MMPutC(<font class="keywordtype">int</font> c, FILE* stream);
00044   <font class="keyword">static</font> <font class="keywordtype">int</font> CRT_CALL MMSeek(FILE* stream, <font class="keywordtype">long</font> offset, <font class="keywordtype">int</font> origin);
00045   <font class="keyword">static</font> <font class="keywordtype">int</font> CRT_CALL MMTell(FILE* stream);
00046   <font class="keyword">static</font> <font class="keywordtype">int</font> CRT_CALL MMEof(FILE* stream);
00047 
00048   <font class="comment">// MikMod driver implementation</font>
00049   <font class="keyword">static</font> BOOL ACQ_IsThere();
00050   <font class="keyword">static</font> BOOL ACQ_Init(MDRIVER* md, uint latency, <font class="keywordtype">void</font>* optstr);
00051   <font class="keyword">static</font> <font class="keywordtype">void</font> ACQ_Exit(MDRIVER* md);
00052   <font class="keyword">static</font> <font class="keywordtype">void</font> ACQ_Update(MDRIVER* md);
00053   <font class="keyword">static</font> BOOL ACQ_SetSoftVoices(MDRIVER* md, uint voices);
00054   <font class="keyword">static</font> BOOL ACQ_SetMode(MDRIVER* md, uint mixspeed, uint mode,
00055                           uint channels, uint cpumode);
00056   <font class="keyword">static</font> <font class="keywordtype">void</font> ACQ_GetMode(MDRIVER* md, uint* mixspeed, uint* mode,
00057                           uint* channels, uint* cpumode);
00058 
00059 <font class="keyword">private</font>:
00060   <font class="keyword">enum</font> { SAMPLE_BUFFER_SIZE = 4096 };
00061 
00062   <a class="code" href="classIFile.html">IFile</a>* m_file;
00063 
00064   <font class="comment">// MikMod handles</font>
00065   MDRIVER* m_driver;
00066   UNIMOD*  m_module;
00067   MPLAYER* m_player;
00068 
00069   MMSTREAM m_stream;
00070 
00071   adr_u32  m_samples_left;
00072   adr_u32* m_next_sample;
00073   adr_u32  m_sample_buffer[SAMPLE_BUFFER_SIZE];
00074 
00075   <font class="keywordtype">bool</font> m_at_eof;
00076 
00077   <font class="comment">// mikmod driver description</font>
00078   <font class="keyword">static</font> MD_DEVICE drv_acq;
00079 };
00080 
00081 
00082 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Mon Jun 10 02:55:12 2002 for audiere by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.8.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
