<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>debug.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc1 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>debug.cpp</h1><a href="debug_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#ifdef WIN32</span>
00002 <span class="preprocessor"></span><span class="preprocessor">  #include &lt;windows.h&gt;</span>
00003 <span class="preprocessor">#endif</span>
00004 <span class="preprocessor"></span>
00005 <span class="preprocessor">#include "<a class="code" href="debug_8h.html">debug.h</a>"</span>
00006 
00007 
00008 <span class="keyword">namespace </span>audiere {
00009 
00010   FILE* Log::handle;
00011   <span class="keywordtype">int</span> Log::indent_count;
00012 
00013 
<a name="l00014"></a><a class="code" href="classaudiere_1_1Log.html#d0">00014</a>   <span class="keywordtype">void</span>
00015   Log::Write(<span class="keyword">const</span> <span class="keywordtype">char</span>* str)
00016   {
00017     std::string s(std::string(indent_count * 2, <span class="charliteral">' '</span>) + str + <span class="stringliteral">"\n"</span>);
00018 
00019 <span class="preprocessor">    #ifdef WIN32</span>
00020 <span class="preprocessor"></span>      OutputDebugString(s.c_str());
00021 <span class="preprocessor">    #endif</span>
00022 <span class="preprocessor"></span>
00023     EnsureOpen();
00024     <span class="keywordflow">if</span> (handle) {
00025       fputs(s.c_str(), handle);
00026       fflush(handle);
00027     }
00028   }
00029 
00030 
00031   <span class="keywordtype">void</span>
00032   Log::EnsureOpen()
00033   {
00034     <span class="keywordflow">if</span> (!handle) {
00035 
00036 <span class="preprocessor">      #ifdef WIN32</span>
00037 <span class="preprocessor"></span>        handle = fopen(<span class="stringliteral">"C:/audiere_debug.log"</span>, <span class="stringliteral">"w"</span>);
00038 <span class="preprocessor">      #else</span>
00039 <span class="preprocessor"></span>        std::string home(getenv(<span class="stringliteral">"HOME"</span>));
00040         handle = fopen((home + <span class="stringliteral">"/audiere_debug.log"</span>).c_str(), <span class="stringliteral">"w"</span>);
00041         <span class="keywordflow">if</span> (!handle) {
00042           handle = stderr;
00043         }
00044 <span class="preprocessor">      #endif</span>
00045 <span class="preprocessor"></span>
00046       atexit(Close);
00047     }
00048   }
00049 
00050 
00051   <span class="keywordtype">void</span>
00052   Log::Close()
00053   {
00054     fclose(handle);
00055   }
00056 
00057 }
</pre></div><hr><address style="align: right;"><small>Generated on Tue Jul 15 12:36:47 2003 for audiere by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc1 </small></address>
</body>
</html>
